---
import Layout from "../../layouts/Layout.astro";
import products from "../../data/products.json";

export async function getStaticPaths() {
  return products.map((p) => ({
    params: { slug: p.slug },
    props: { product: p },
  }));
}

const { product } = Astro.props as { product: {
  slug: string;
  title: string;
  summary?: string;
  technologies?: string[];
  url?: string;
} };
---

<Layout>
  <main>
    <h1>{product.title}</h1>
    {product.summary && <p>{product.summary}</p>}

    {product.technologies && product.technologies.length > 0 && (
      <section>
        <h2>Technologies</h2>
        <p>{product.technologies.join(", ")}</p>
      </section>
    )}

    {product.url && (
      <p>
        <a href={product.url} target="_blank" rel="noopener noreferrer">Visit project →</a>
      </p>
    )}

    <p>
      <a href="/products">← Back to Products</a>
    </p>
  </main>
</Layout>

