---
import Layout from "../../layouts/Layout.astro";
import products from "../../data/products.json";

export async function getStaticPaths() {
  return products.map((p) => ({
    params: { slug: p.slug },
    props: { product: p },
  }));
}

const { product } = Astro.props as { product: {
  slug: string;
  title: string;
  summary?: string;
  technologies?: string[];
  url?: string;
} };
---

<Layout>
  <main class="mx-auto max-w-5xl px-4 py-12">
    <h1 class="text-3xl md:text-4xl font-bold tracking-tight">{product.title}</h1>
    {product.summary && <p class="mt-2 text-white/70">{product.summary}</p>}

    {product.technologies && product.technologies.length > 0 && (
      <section class="mt-6">
        <h2 class="text-sm uppercase tracking-wider text-white/50">Technologies</h2>
        <div class="mt-2 flex flex-wrap gap-2">
          {product.technologies.map((t) => (
            <span class="px-3 py-1 rounded-full border border-white/10 bg-white/5 text-sm">{t}</span>
          ))}
        </div>
      </section>
    )}

    {product.url && (
      <p class="mt-6">
        <a class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 transition" href={product.url} target="_blank" rel="noopener noreferrer">Visit project →</a>
      </p>
    )}

    <p class="mt-10">
      <a href="/products" class="text-white/80 underline hover:text-white">← Back to Products</a>
    </p>
  </main>
</Layout>
